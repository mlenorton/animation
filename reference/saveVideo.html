<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function opens a graphics device to record the images produced in the
code expr, then uses FFmpeg to convert these images to a video."><title>Convert a sequence of images to a video by FFmpeg — saveVideo • animation</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert a sequence of images to a video by FFmpeg — saveVideo"><meta property="og:description" content="This function opens a graphics device to record the images produced in the
code expr, then uses FFmpeg to convert these images to a video."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">animation</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.7.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/yihui/animation/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Convert a sequence of images to a video by FFmpeg</h1>
      <small class="dont-index">Source: <a href="https://github.com/yihui/animation/blob/HEAD/R/saveVideo.R" class="external-link"><code>R/saveVideo.R</code></a></small>
      <div class="d-none name"><code>saveVideo.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function opens a graphics device to record the images produced in the
code <code>expr</code>, then uses FFmpeg to convert these images to a video.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">saveVideo</span><span class="op">(</span></span>
<span>  <span class="va">expr</span>,</span>
<span>  video.name <span class="op">=</span> <span class="st">"animation.mp4"</span>,</span>
<span>  img.name <span class="op">=</span> <span class="st">"Rplot"</span>,</span>
<span>  ffmpeg <span class="op">=</span> <span class="fu"><a href="ani.options.html">ani.options</a></span><span class="op">(</span><span class="st">"ffmpeg"</span><span class="op">)</span>,</span>
<span>  other.opts <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"[.]mp4$"</span>, <span class="va">video.name</span><span class="op">)</span><span class="op">)</span> <span class="st">"-pix_fmt yuv420p"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>expr</dt>
<dd><p>the R code to draw (several) plots</p></dd>


<dt>video.name</dt>
<dd><p>the file name of the output video (e.g.
<code class="file">animation.mp4</code> or <code class="file">animation.avi</code>)</p></dd>


<dt>img.name</dt>
<dd><p>the file name of the sequence of images to be generated</p></dd>


<dt>ffmpeg</dt>
<dd><p>the command to call FFmpeg (e.g.
<code>'C:/Software/ffmpeg/bin/ffmpeg.exe'</code> under Windows or 'avconv' on some linux machines); note the full
path of FFmpeg can be pre-specified in <code><a href="ani.options.html">ani.options</a>('ffmpeg')</code></p></dd>


<dt>other.opts</dt>
<dd><p>other options to be passed to <code>ffmpeg</code>, e.g. we can
specify the bitrate as <code>other.opts = '-b 400k'</code> (The default <code>"-pix_fmt yuv420p"</code> is a work-around for a bug in some versions of ffmpeg.)</p></dd>


<dt>...</dt>
<dd><p>other arguments to be passed to <code><a href="ani.options.html">ani.options</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An integer indicating failure (-1) or success (0) of the converting
  (refer to <code><a href="https://rdrr.io/r/base/system.html" class="external-link">system</a></code>).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function uses <code><a href="https://rdrr.io/r/base/system.html" class="external-link">system</a></code> to call FFmpeg to convert the images
to a single video. The command line used in this function is: <code class="command">ffmpeg
-y -r &lt;1/interval&gt; -i &lt;img.name&gt;%d.&lt;ani.type&gt; other.opts video.name</code></p>
<p>where <code>interval</code> comes from <code>ani.options('interval')</code>, and
<code>ani.type</code> is from <code>ani.options('ani.type')</code>. For more details on
the numerous options of FFmpeg, please see the reference.</p>
<p>Some linux systems may use the alternate software 'avconv' instead of 'ffmpeg'.  The package will attempt to determine which command is present and set <code><a href="ani.options.html">ani.options</a>('ffmpeg')</code> to an appropriate default value. This can be overridden by passing in the <code>ffmpeg</code> argument.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>There are a lot of possibilities in optimizing the video. My knowledge
  on FFmpeg is very limited, hence the default output by this function could
  be of low quality or too large. The file <code class="file">presets.xml</code> of WinFF might
  be a good guide: <a href="https://code.google.com/archive/p/winff" class="external-link">https://code.google.com/archive/p/winff</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Examples at <a href="https://yihui.org/animation/example/savevideo/" class="external-link">https://yihui.org/animation/example/savevideo/</a></p>
<p>To know more about ffmpeg, please see <a href="http://ffmpeg.org/documentation.html" class="external-link">http://ffmpeg.org/documentation.html</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other utilities: 
<code><a href="convert.html">im.convert</a>()</code>,
<code><a href="saveGIF.html">saveGIF</a>()</code>,
<code><a href="saveHTML.html">saveHTML</a>()</code>,
<code><a href="saveLatex.html">saveLatex</a>()</code>,
<code><a href="saveSWF.html">saveSWF</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Yihui Xie, based on an inital version by Thomas Julou
  <a href="mailto:thomas.julou@gmail.com">thomas.julou@gmail.com</a></p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Yihui Xie.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

